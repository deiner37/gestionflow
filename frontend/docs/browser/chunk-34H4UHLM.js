import{a as E,b as L,c as F,d as q,e as N,f as B,h as Y,i as G,j as H,l as P,m as h,o as W}from"./chunk-JWW2Z6QR.js";import{A as V,D as S,G as b,I as e,J as r,L as D,M as w,N as _,P as i,Q as j,R as O,T as d,U as p,V as c,ea as y,ga as f,l as U,pa as x,q as v,qa as R,r as M,ta as k,ua as A,w as l,y as u,z as C}from"./chunk-WLZOE7EK.js";function ee(a,s){if(a&1&&(e(0,"div",15),i(1),r()),a&2){let o=_();l(),O(" ",o.errorMessage," ")}}var I=class a{constructor(s,o,t){this.usersService=s;this.router=o;this.authService=t}email="";password="";errorMessage="";login(){this.usersService.login(this.email,this.password).subscribe(s=>{this.authService.setToken(s.access_token),this.authService.setUserData(s.user),this.router.navigate(["/home"],{replaceUrl:!0}).then(()=>{}).catch(o=>{console.error("Navigation error:",o)})},s=>{this.errorMessage="Invalid credentials. Please try again.",console.error("Login error:",s)})}static \u0275fac=function(o){return new(o||a)(u(W),u(x),u(A))};static \u0275cmp=C({type:a,selectors:[["app-login"]],decls:22,vars:3,consts:[["loginForm",""],[1,"login-container","d-flex","justify-content-center","align-items-center","min-vh-100","bg-light"],[1,"card","shadow-lg","p-4",2,"width","100%","max-width","400px","border-radius","15px"],[1,"card-body"],[1,"card-title","text-center","mb-4",2,"color","#2c3e50"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","mb-3",2,"background-color","#3498db","border","none"],[1,"text-center"],["routerLink","/register",1,"text-decoration-none",2,"color","#27ae60"],["role","alert",1,"alert","alert-danger"]],template:function(o,t){if(o&1){let m=D();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),i(4,"Login"),r(),e(5,"form",5,0),w("ngSubmit",function(){return v(m),M(t.login())}),e(7,"div",6)(8,"label",7),i(9,"Email"),r(),e(10,"input",8),c("ngModelChange",function(g){return v(m),p(t.email,g)||(t.email=g),M(g)}),r()(),e(11,"div",6)(12,"label",9),i(13,"Password"),r(),e(14,"input",10),c("ngModelChange",function(g){return v(m),p(t.password,g)||(t.password=g),M(g)}),r()(),S(15,ee,2,1,"div",11),e(16,"button",12),i(17,"Login"),r(),e(18,"p",13),i(19," Don't have an account? "),e(20,"a",14),i(21,"Register here"),r()()()()()()}o&2&&(l(10),d("ngModel",t.email),l(4),d("ngModel",t.password),l(),b("ngIf",t.errorMessage))},dependencies:[f,y,h,B,E,L,F,P,N,q,R],styles:[".login-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);transition:background .5s ease}.card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0003}.form-control[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 5px #3498db80}.btn-primary[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #3498db4d}a[_ngcontent-%COMP%]:hover{color:#2980b9}"]})};function te(a,s){if(a&1&&(e(0,"p",21),i(1),r()),a&2){let o=_();l(),j(o.errorMessage)}}var T=class a{constructor(s,o){this.usersService=s;this.router=o}user={name:"",email:"",password:"",role:"user"};errorMessage="";register(){this.usersService.register(this.user).subscribe(()=>{this.router.navigate(["/"])},s=>{this.errorMessage="Registration error. Please check the data or try again."})}static \u0275fac=function(o){return new(o||a)(u(W),u(x))};static \u0275cmp=C({type:a,selectors:[["app-register"]],decls:35,vars:5,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","role",1,"form-label"],["id","role",1,"form-select",3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"btn","btn-primary",3,"click"],["class","text-danger mt-2",4,"ngIf"],[1,"mt-3"],["routerLink","/"],[1,"text-danger","mt-2"]],template:function(o,t){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),i(6,"Sign Up"),r()(),e(7,"div",5)(8,"div",6)(9,"label",7),i(10,"Name"),r(),e(11,"input",8),c("ngModelChange",function(n){return p(t.user.name,n)||(t.user.name=n),n}),r()(),e(12,"div",6)(13,"label",9),i(14,"Email"),r(),e(15,"input",10),c("ngModelChange",function(n){return p(t.user.email,n)||(t.user.email=n),n}),r()(),e(16,"div",6)(17,"label",11),i(18,"Password"),r(),e(19,"input",12),c("ngModelChange",function(n){return p(t.user.password,n)||(t.user.password=n),n}),r()(),e(20,"div",6)(21,"label",13),i(22,"Role"),r(),e(23,"select",14),c("ngModelChange",function(n){return p(t.user.role,n)||(t.user.role=n),n}),e(24,"option",15),i(25,"User"),r(),e(26,"option",16),i(27,"Admin"),r()()(),e(28,"button",17),w("click",function(){return t.register()}),i(29,"Sign Up"),r(),S(30,te,2,1,"p",18),e(31,"p",19),i(32,"Already have an account? "),e(33,"a",20),i(34,"Log in here"),r()()()()()()()),o&2&&(l(11),d("ngModel",t.user.name),l(4),d("ngModel",t.user.email),l(4),d("ngModel",t.user.password),l(4),d("ngModel",t.user.role),l(7),b("ngIf",t.errorMessage))},dependencies:[f,y,h,G,H,E,Y,L,P,N,R],encapsulation:2})};var re=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:I},{path:"register",component:T}],J=class a{static \u0275fac=function(o){return new(o||a)};static \u0275mod=V({type:a});static \u0275inj=U({imports:[f,h,k.forChild(re),k]})};export{J as AuthModule};
